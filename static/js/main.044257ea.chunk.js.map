{"version":3,"sources":["utils/sort.js","Table.js","utils/api.js","App.js","index.js"],"names":["dynamicSort","property","sortOrder","substr","a","b","Table","props","React","useState","items","setItems","sortCategory","setSortCategory","input","setInput","categories","setCategories","currentPage","setCurrentPage","itemsPerPage","currentItems","setCurrentItems","getCurrentItems","useMemo","indexOfLastItem","indexOfFirstItem","slice","useEffect","fetch","then","res","json","Object","keys","searchedItems","forEach","item","values","filter","elem","toString","toLowerCase","indexOf","search","length","push","handleSearch","onSubmit","e","preventDefault","className","name","onInput","target","value","handleInput","onBlur","map","category","i","onClick","innerText","sort","handleClick","pageNumbers","Math","ceil","pageNumber","pageNumberClickHandler","parseInt","getPagesNumbers","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.044257ea.chunk.js","sourcesContent":["export function dynamicSort(property) {\n  let sortOrder = 1;\n  if (property[0] === \"-\") {\n    sortOrder = -1;\n    property = property.substr(1);\n  }\n  return function (a, b) {\n    let result =\n      a[property] < b[property] ? -1 : a[property] > b[property] ? 1 : 0;\n    return result * sortOrder;\n  };\n}\n","import React from \"react\";\nimport { getItems } from \"./utils/api\";\nimport { dynamicSort } from \"./utils/sort\";\nimport \"./Table.css\";\n\nconst Table = (props) => {\n  const [items, setItems] = React.useState([]);\n  const [sortCategory, setSortCategory] = React.useState(\"\");\n  const [input, setInput] = React.useState({});\n  const [categories, setCategories] = React.useState([]);\n  const [currentPage, setCurrentPage] = React.useState(1);\n  const [itemsPerPage, setItemsPerpage] = React.useState(5);\n  const [currentItems, setCurrentItems] = React.useState([]);\n\n  const getCurrentItems = React.useMemo(() => {\n    if (items) {\n      const indexOfLastItem = currentPage * itemsPerPage;\n      const indexOfFirstItem = indexOfLastItem - itemsPerPage;\n      return [...items.slice(indexOfFirstItem, indexOfLastItem)];\n    }\n  }, [items, currentPage, itemsPerPage]);\n\n  const handleSearch = () => {\n    let searchedItems = [];\n    getCurrentItems.forEach((item) => {\n      const finded = Object.values(item).filter((elem) => {\n        return elem.toString().toLowerCase().indexOf(input.search) !== -1;\n      });\n      if (finded.length) searchedItems.push(item);\n    });\n    setCurrentItems([...searchedItems]);\n  };\n\n  const pageNumberClickHandler = (e) => setCurrentPage(e.target.innerText);\n\n  const getPagesNumbers = () => {\n    const pageNumbers = [];\n    for (let i = 1; i <= Math.ceil(items.length / itemsPerPage); i++) {\n      pageNumbers.push(i);\n    }\n    return (\n      <ul className=\"page-numbers\">\n        {pageNumbers.map((pageNumber, i) => (\n          <li\n            key={pageNumber}\n            onClick={(e) => pageNumberClickHandler(e)}\n            className={\n              pageNumber === parseInt(currentPage)\n                ? \"page-numbers__page page-numbers__page_selected\"\n                : \"page-numbers__page\"\n            }\n          >\n            {pageNumber}\n          </li>\n        ))}\n      </ul>\n    );\n  };\n\n  const handleClick = (e) => {\n    if (e.target.innerText === sortCategory) {\n      setSortCategory(`-${e.target.innerText}`);\n      setCurrentItems([\n        ...currentItems.sort(dynamicSort(`-${e.target.innerText}`)),\n      ]);\n    } else {\n      setSortCategory(e.target.innerText);\n      setCurrentItems([...currentItems.sort(dynamicSort(e.target.innerText))]);\n    }\n  };\n\n  const handleInput = (e) => setInput({ [e.target.name]: e.target.value });\n\n  React.useEffect(() => {\n    getItems()\n      .then((res) => {\n        setItems(res);\n        return res;\n      })\n      .then((res) => setCategories(Object.keys(res[0])));\n  }, []);\n\n  React.useEffect(() => {\n    setCurrentItems([...getCurrentItems]);\n  }, [items, currentPage, itemsPerPage, getCurrentItems]);\n\n  React.useEffect(() => {\n    handleSearch();\n  }, [input]);\n\n  return (\n    <>\n      <form onSubmit={(e) => e.preventDefault()} className=\"form-search\">\n        <h3>Search</h3>\n        <input\n          name=\"search\"\n          onInput={(e) => handleInput(e)}\n          value={input.search || \"\"}\n          onBlur={(e) => {\n            setInput({ ...input, [\"search\"]: \"\" });\n          }}\n        />\n      </form>\n      <table>\n        <tr className=\"table__header\">\n          {categories.map((category, i) => (\n            <td\n              onClick={(e) => handleClick(e)}\n              className=\"table__category\"\n              key={i}\n            >\n              {category}\n            </td>\n          ))}\n        </tr>\n\n        {currentItems.map((elem, i) => (\n          <tr key={i} className=\"table__row\">\n            {categories.map((category, i) => (\n              <td key={i}>{elem[category]}</td>\n            ))}\n          </tr>\n        ))}\n      </table>\n      {getPagesNumbers()}\n    </>\n  );\n};\n\nexport default Table;\n","export const getItems = () => {\n  return fetch(\n    \"https://jsonplaceholder.typicode.com/comments?_limit=50\"\n  ).then((res) => res.json());\n};\n","import \"./App.css\";\nimport Table from \"./Table\";\n\nfunction App() {\n  return (\n    <>\n      <Table />\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}